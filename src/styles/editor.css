
/* =============================================
   Designer Mode Specific Styles
============================================= */
@layer base {
  [data-role="designer"] .designer-specific-element {
    border-bottom: none !important;
  }
  
  /* New spacing for editor toolbar to ensure proper alignment */
  .editor-toolbar-container {
    margin-bottom: 0.5rem;
  }
  
  /* Standard document container styles across all views */
  .document-container {
    margin: 0 auto;
    background-color: white;
    border: 1px solid var(--border);
    box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);
  }
  
  /* =============================================
     Font Size Enforcement Rules
  ============================================= */
  /* Ensure inline styles take precedence over everything */
  [style*="font-size"] {
    font-size: unset !important;
  }
  
  /* Target preserve-styling spans with highest specificity */
  .preserve-styling[style*="font-size"] {
    font-size: unset !important;
  }
  
  /* Special class for our font size extension with max specificity */
  .custom-font-size {
    font-size: unset !important;
  }
  
  /* Ensure we override any Tailwind prose-sm styles that set font sizes */
  .prose-sm .ProseMirror {
    font-size: initial !important;
  }
  
  /* Make sure no parent can override font sizes of styled elements */
  .prose-sm [style*="font-size"],
  .prose [style*="font-size"] {
    font-size: unset !important;
  }
  
  /* Override for data-font-size attribute */
  [data-font-size] {
    font-size: attr(data-font-size px) !important;
  }
  
  /* New more specific rules to ensure font size consistency */
  .prose .custom-font-size,
  .prose-sm .custom-font-size {
    font-size: unset !important;
  }
  
  /* Ensure font size is applied when using data attributes */
  [data-style-fontSize] {
    font-size: attr(data-style-fontSize) !important;
  }
  
  /* Override for any DOM elements with custom font size attributes */
  [style*="font-size"].custom-font-size,
  span[style*="font-size"].custom-font-size,
  p[style*="font-size"].custom-font-size {
    font-size: unset !important;
  }
  
  /* Enforce that any element that has both a style and a data attribute uses the style */
  [style*="font-size"][data-font-size] {
    font-size: unset !important;
  }
  
  /* =============================================
     Z-Index and Dropdown Corrections
  ============================================= */
  /* Ensure editor toolbar is always above all content panels */
  .editor-toolbar-container, 
  .editor-toolbar,
  nav + .editor-toolbar-container,
  nav + div .editor-toolbar {
    position: relative;
    z-index: 50 !important;
  }
  
  /* Ensure the Radix select dropdown shows above content */
  [data-radix-popper-content-wrapper] {
    z-index: 9999 !important; /* Highest z-index */
    position: relative !important;
    pointer-events: auto !important;
  }
  
  /* Fix for menus and dropdowns to appear correctly */
  .SelectContent, 
  [role="dialog"],
  [role="tooltip"],
  [role="menu"],
  [data-state="open"] ~ [data-radix-popper-content] {
    z-index: 9999 !important; /* Highest z-index */
  }
  
  /* Explicitly target Radix popover content */
  [data-radix-popper-content] {
    z-index: 9999 !important;
  }
  
  /* Ensure consistent editor component border styling with higher specificity */
  .editor-toolbar .SelectTrigger,
  .editor-toolbar button[data-state],
  .editor-toolbar-container select,
  .editor-toolbar-container button,
  .editor-toolbar-container .radix-select-trigger,
  .SelectTrigger,
  [data-radix-select-trigger] {
    border-color: #D9DADC !important;
    border-radius: 0.375rem !important;
  }
  
  /* Target the actual combobox element with maximum specificity */
  button[role="combobox"],
  div[role="combobox"],
  [data-radix-select-trigger][role="combobox"],
  [class*="SelectTrigger"][role="combobox"] {
    border-radius: 0.375rem !important;
    overflow: hidden !important;
  }
  
  /* Override Radix UI default styles */
  [data-radix-popper-content-wrapper] > div {
    border-radius: 0.375rem !important;
    overflow: hidden !important;
    background-color: white !important;
  }
  
  /* Force dropdown menu to be visible */
  .SelectContent[data-state="open"],
  [data-radix-popper-content-wrapper][data-state="open"] {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
  }
}
